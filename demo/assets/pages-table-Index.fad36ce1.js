import{d as e,r as a,q as l,o as t,c as o,w as r,e as d,F as s,f as i,u as n,n as c,y as p,x as h,b,t as u,g,i as f,T as m,v as w,h as x,j as _,a as y,p as v,a3 as $}from"./index-a29608c3.js";import{x as j,w as k,l as C,i as S,g as H,m as L,h as I,t as F,v as M,C as D,p as R,a9 as V,b as E,G,s as O,O as T,a as U}from"./page-wraper.b2442bab.js";import{_ as q}from"./wd-sort-button.f072067c.js";import{u as z}from"./useTranslate.deea6125.js";import{u as A}from"./useChildren.8329aa88.js";import{_ as B}from"./demo-block.bb8975dc.js";const J={prop:j(String),label:j(String),width:k(100),sortable:C(!1),fixed:C(!1),align:S("left")},K={...H,data:j(Array),border:C(!0),stripe:C(!0),height:S("80vh"),rowHeight:L(50),showHeader:C(!0),ellipsis:C(!0),index:{type:[Object,Boolean],default:!1}},N=Symbol("wd-table"),P=E(e({name:"wd-table-col",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:J,setup(e,{expose:m}){const w=e,{parent:x,index:_}=I(N),y=a(0),v=l((()=>!!F(x)&&x.stripe)),$=l((()=>!!F(x)&&x.border)),j=l((()=>!!F(x)&&x.ellipsis)),k=l((()=>{let e=!1;return w.fixed&&F(x)&&(e=x.getIsLastFixed(w)),e})),C=l((()=>{let e={};return F(w.width)&&(e.width=M(w.width)),w.fixed&&F(x)&&D(x.getFixedStyle)&&(e=x.getFixedStyle(_.value,e)),e})),S=l((()=>{let e={};const a=F(x)?x.rowHeight:"80rpx";return F(a)&&(e.height=M(a)),w.fixed&&F(x)&&D(x.getFixedStyle)&&(e=x.getFixedStyle(_.value,e)),R(e)})),H=l((()=>{if(!F(x))return[];return x.data.map((e=>e[w.prop]))}));function L(e){return F(x)&&x.data[e]||{}}return m({sortDirection:y}),(e,a)=>{const l=g,m=f;return t(),o(m,{class:c(`wd-table-col ${e.fixed?"wd-table-col--fixed":""} ${n(k)&&n(F)(n(x))&&n(x).scrollLeft?"is-shadow":""}`),style:p(n(C))},{default:r((()=>[(t(!0),d(s,null,i(n(H),((a,d)=>(t(),o(m,{class:c(`wd-table__cell ${n(v)&&n(V)(d)?"is-stripe":""} ${n($)?"is-border":""} is-${e.align}`),key:d,style:p(n(S)),onClick:e=>function(e){F(x)&&D(x.rowClick)&&x.rowClick(e)}(d)},{default:r((()=>[e.$slots.value?h(e.$slots,"value",{key:0,row:L(d),index:d},void 0,!0):(t(),o(l,{key:1,class:c("wd-table__value "+(n(j)?"is-ellipsis":""))},{default:r((()=>[b(u(a),1)])),_:2},1032,["class"]))])),_:2},1032,["class","style","onClick"])))),128))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-17b6c243"]]),Q=E(e({name:"wd-table",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:K,emits:["sort-method","row-click"],setup(e,{emit:j}){const k=e,{translate:C}=z("tableCol"),S=m({data:k.data,stripe:k.stripe,border:k.border,height:k.height,rowHeight:k.rowHeight,showHeader:k.showHeader,ellipsis:k.ellipsis,scrollLeft:0,rowClick:function(e){j("row-click",{rowIndex:e})},getIsLastFixed:J,getFixedStyle:Q}),{linkChildren:H,children:L}=A(N);H(S);const I=G(),D=a({prop:I,label:C("indexLabel"),width:"100rpx",sortable:!1,fixed:!1,align:"left",...O(k.index)?k.index:{}}),V=T((function(e){if(!k.showHeader)return;S.scrollLeft=e.detail.scrollLeft}),100,{leading:!1});w((()=>k.data),(e=>{S.data=e}),{deep:!0}),w((()=>k.stripe),(e=>{S.stripe=e}),{deep:!0}),w((()=>k.border),(e=>{S.border=e}),{deep:!0}),w((()=>k.height),(e=>{S.height=e}),{deep:!0}),w((()=>k.rowHeight),(e=>{S.rowHeight=e}),{deep:!0}),w((()=>k.showHeader),(e=>{S.showHeader=e}),{deep:!0}),w((()=>k.ellipsis),(e=>{S.ellipsis=e}),{deep:!0});const E=l((()=>{const e={};return F(k.height)&&(e["max-height"]=M(k.height)),`${R(e)};${k.customStyle}`})),U=l((()=>{const e={display:"flex"};let a="";return L.forEach((e=>{a=a?`${a} + ${M(e.width)}`:M(e.width)})),e.width=`calc(${a})`,R(e)})),B=l((()=>{const e={};return F(k.height)&&(e.height=F(k.rowHeight)?`calc(${k.data.length} * ${M(k.rowHeight)})`:`calc(${k.data.length} * 50px)`),`${R(e)};`}));function J(e){let a=!1;if(e.fixed&&F(L)){const l=L.filter((e=>e.fixed));l.length&&l[l.length-1].prop===e.prop&&(a=!0)}return a}function K(e){let a={};return F(L[e].width)&&(a.width=M(L[e].width)),L[e].fixed&&(a=Q(e,a)),R(a)}function Q(e,a){if(e>0){let l="";L.forEach(((a,t)=>{t<e&&(l=l?`${l} + ${M(a.width)}`:M(a.width))})),a.left=`calc(${l})`}else a.left=0;return a}return(e,a)=>{const l=x(_("wd-sort-button"),q),m=g,w=f,k=$;return t(),o(w,{class:c(`wd-table ${e.border?"is-border":""} ${e.customClass}`),style:p(n(E))},{default:r((()=>[e.showHeader?(t(),o(k,{key:0,"enable-flex":!0,throttle:!1,scrollLeft:S.scrollLeft,"scroll-x":!0,class:"wd-table__header",onScroll:n(V)},{default:r((()=>[y(w,{id:"table-header",class:"wd-table__content",style:p([n(U),{position:"sticky",top:"0","z-index":"2"}])},{default:r((()=>[(t(!0),d(s,null,i(n(L),((a,d)=>(t(),o(w,{class:c(`wd-table__cell ${e.border?"is-border":""} ${a.fixed?"is-fixed":""} ${e.stripe?"is-stripe":""} is-${a.align} ${J(a)&&S.scrollLeft?"is-shadow":""}`),style:p(K(d)),key:d},{default:r((()=>[a.sortable?(t(),o(l,{key:0,modelValue:a.$.exposed.sortDirection.value,"onUpdate:modelValue":e=>a.$.exposed.sortDirection.value=e,"allow-reset":"",line:!1,title:a.label,onChange:({value:e})=>function(e,a){L[a].$.exposed.sortDirection.value=e,L.forEach(((e,l)=>{a!=l&&(e.$.exposed.sortDirection.value=0)}));const l={prop:L[a].prop,label:L[a].label,width:L[a].width,sortable:L[a].sortable,align:L[a].align,sortDirection:e,fixed:L[a].fixed};j("sort-method",l)}(e,d)},null,8,["modelValue","onUpdate:modelValue","title","onChange"])):(t(),o(m,{key:1,class:c("wd-table__value "+(e.ellipsis?"is-ellipsis":""))},{default:r((()=>[b(u(a.label),1)])),_:2},1032,["class"]))])),_:2},1032,["class","style"])))),128))])),_:1},8,["style"])])),_:1},8,["scrollLeft","onScroll"])):v("",!0),y(k,{class:"wd-table__body",style:p(n(B)),"enable-flex":!0,throttle:!1,"scroll-x":!0,onScroll:n(V),scrollLeft:S.scrollLeft},{default:r((()=>[y(w,{id:"table-body",class:"wd-table__content",style:p(n(U))},{default:r((()=>[!1!==e.index?(t(),o(P,{key:0,prop:D.value.prop,label:D.value.label,width:D.value.width,sortable:D.value.sortable,fixed:D.value.fixed,align:D.value.align},{value:r((({index:e})=>[y(m,null,{default:r((()=>[b(u(e+1),1)])),_:2},1024)])),_:1},8,["prop","label","width","sortable","fixed","align"])):v("",!0),h(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["style","onScroll","scrollLeft"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-ca407c6c"]]),W=E(e({__name:"Index",setup(e){const l=a([{name:"关羽",school:"武汉市阳逻绿豆学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:66,compare:"48%",hobby:"颜良文丑，以吾观之，如土鸡瓦犬耳。"},{name:"刘备",school:"武汉市阳逻编织学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:68,compare:"21%",hobby:"我得空明，如鱼得水也"},{name:"赵云",school:"武汉市阳逻妇幼保健学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:91,compare:"12%",hobby:"子龙，子龙，世无双"},{name:"赵云",school:"武汉市阳逻妇幼保健学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:91,compare:"12%",hobby:"子龙，子龙，世无双"},{name:"孔明",school:"武汉市阳逻卧龙学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:99,compare:"18%",hobby:"兴汉讨贼，克复中原"},{name:"赵云",school:"武汉市阳逻妇幼保健学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:36,compare:"48%",hobby:"子龙，子龙，世无双"},{name:"关羽",school:"武汉市阳逻绿豆学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:66,compare:"48%",hobby:"颜良文丑，以吾观之，如土鸡瓦犬耳。"},{name:"刘备",school:"武汉市阳逻编织学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:68,compare:"21%",hobby:"我得空明，如鱼得水也"},{name:"赵云",school:"武汉市阳逻妇幼保健学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:91,compare:"12%",hobby:"子龙，子龙，世无双"},{name:"孔明",school:"武汉市阳逻卧龙学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:99,compare:"18%",hobby:"兴汉讨贼，克复中原"},{name:"赵云",school:"武汉市阳逻妇幼保健学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:36,compare:"48%",hobby:"子龙，子龙，世无双"},{name:"关羽",school:"武汉市阳逻绿豆学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:66,compare:"48%",hobby:"颜良文丑，以吾观之，如土鸡瓦犬耳。"},{name:"刘备",school:"武汉市阳逻编织学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:68,compare:"21%",hobby:"我得空明，如鱼得水也"},{name:"赵云",school:"武汉市阳逻妇幼保健学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:91,compare:"12%",hobby:"子龙，子龙，世无双"},{name:"孔明",school:"武汉市阳逻卧龙学院",major:"计算机科学与技术专业",gender:"男",graduation:"2022年1月12日",grade:99,compare:"18%",hobby:"兴汉讨贼，克复中原"}]);function d(e){l.value=l.value.reverse()}function s({rowIndex:e}){console.log(e)}return(e,a)=>{const i=x(_("wd-table-col"),P),n=x(_("wd-table"),Q),c=x(_("demo-block"),B),p=g,h=f,m=x(_("page-wraper"),U);return t(),o(m,null,{default:r((()=>[y(c,{title:"基本用法"},{default:r((()=>[y(n,{data:l.value,onSortMethod:d,height:"328px",onRowClick:s},{default:r((()=>[y(i,{prop:"name",label:"姓名",align:"center",width:"50%"}),y(i,{prop:"grade",label:"分数",align:"center",width:"50%"})])),_:1},8,["data"])])),_:1}),y(c,{title:"无边框"},{default:r((()=>[y(n,{data:l.value,onSortMethod:d,height:"328px",border:!1,onRowClick:s},{default:r((()=>[y(i,{prop:"name",label:"姓名",align:"center",width:"50%"}),y(i,{prop:"grade",label:"分数",align:"center",width:"50%"})])),_:1},8,["data"])])),_:1}),y(c,{title:"无斑马纹"},{default:r((()=>[y(n,{data:l.value,onSortMethod:d,height:"328px",stripe:!1,onRowClick:s},{default:r((()=>[y(i,{prop:"name",label:"姓名",align:"center",width:"50%"}),y(i,{prop:"grade",label:"分数",align:"center",width:"50%"})])),_:1},8,["data"])])),_:1}),y(c,{title:"不展示表头"},{default:r((()=>[y(n,{data:l.value,onSortMethod:d,height:"328px","show-header":!1,onRowClick:s},{default:r((()=>[y(i,{prop:"name",label:"姓名",align:"center",width:"50%"}),y(i,{prop:"grade",label:"分数",align:"center",width:"50%"})])),_:1},8,["data"])])),_:1}),y(c,{title:"固定列"},{default:r((()=>[y(n,{data:l.value,onSortMethod:d,onRowClick:s,height:"328px"},{default:r((()=>[y(i,{prop:"name",label:"姓名",fixed:"",sortable:!0,align:"center"}),y(i,{prop:"grade",label:"分数",fixed:"",sortable:!0,align:"center"}),y(i,{prop:"hobby",label:"一言以蔽之",sortable:!0,width:160}),y(i,{prop:"school",label:"求学之所",width:180}),y(i,{prop:"major",label:"专业"}),y(i,{prop:"gender",label:"性别"})])),_:1},8,["data"])])),_:1}),y(c,{title:"显示索引"},{default:r((()=>[y(n,{data:l.value,height:"328px",onSortMethod:d,index:{align:"center"}},{default:r((()=>[y(i,{prop:"name",label:"姓名",sortable:!0,align:"center"}),y(i,{prop:"grade",label:"分数",sortable:!0,align:"center"}),y(i,{prop:"hobby",label:"一言以蔽之",sortable:!0,width:160}),y(i,{prop:"school",label:"求学之所",width:180}),y(i,{prop:"major",label:"专业"}),y(i,{prop:"gender",label:"性别"})])),_:1},8,["data"])])),_:1}),y(c,{title:"自定义列模板"},{default:r((()=>[y(n,{data:l.value,onSortMethod:d,onRowClick:s,height:"328px"},{default:r((()=>[y(i,{prop:"name",label:"姓名",fixed:"",sortable:!0,align:"center"}),y(i,{prop:"grade",label:"分数",fixed:"",sortable:!0,align:"center"},{value:r((({row:e})=>[y(h,{class:"custom-class"},{default:r((()=>[y(p,null,{default:r((()=>[b(u(e.grade),1)])),_:2},1024),y(p,null,{default:r((()=>[b("同比"+u(e.compare),1)])),_:2},1024)])),_:2},1024)])),_:1}),y(i,{prop:"hobby",label:"一言以蔽之",sortable:!0,width:160}),y(i,{prop:"school",label:"求学之所",width:180}),y(i,{prop:"major",label:"专业"}),y(i,{prop:"gender",label:"性别"}),y(i,{prop:"graduation",label:"学成时间"})])),_:1},8,["data"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-377e4228"]]);export{W as default};
